[음악]

아

안녕하세요

고프 의 디자인 패턴 즈음 스테이트

패턴 에 대한 강좌입니다

스페이드 패턴은 어떤 상태를 클래스

로 표현해서 객체로 다룰 수 있는

패턴 인데요

많은 상태가 있고 각 상태 마다

다양한 처리한다면 각 상태를 비교하는

이프 조건문을 많이 작성하게 됩니다

이런 많은 상태에 대한 입부 조건문

들은 서로 다른 입부 조건문 의

영향을 주게 되어 코드를 매우

복잡하게 만듭니다

이러한 복잡한 이프 섞어 분들을

상태라는 객체로 체력의 되면 이프

저건 물을 사용하지 않고도 코드를

매우 깔끔하게 작성할 수 있습니다

먼저 콘솔 프로그램 을 살펴보겠습니다

게임 중에 어떤 플레이어가 제 자리에

그대로 서 있습니다

제자리에서 있으므로 속도는 0 이구요

이러한 상태에서 제자리에 서 있기

앉기 걷기 뛰기 와 같은 4가지

동작을 할 수 있습니다

동작을 입력해 보겠습니다

현재 플레이어의 상태는 제자리에 서

있는 상태인데요

이 상태에서

제자리 서기 를 입력하게 되면

레이어는 언제 움직일 거야 라고

이야기합니다 그리고 여성이 상태는

제작이 에서 이 상태구요

이 상태에서 앉기를 입력하게 되면

앉으니 깐 편하고 좋다 라고 얘기하고

상태는 앉아 있는 상태가 됩니다

이 앉은 상태에서 걷기 를 입력하게

되면 앉아서 어떻게 걸어 하고 일단

서자 라고 이야기 한 다음에

겉이 않고 제자리에 서 있는 상태가

됩니다

제자리에 선 상태에서

뛰기를 입력하게 되면 요

갑자기 뛴다 라고 하고 상태는 뛰는

주게 됩니다

이 뛰는 상태에서

걷기 를 입력하게 되면 속도를 줄게

라고 하고

상태는 걷는 중이고 속도가 뛰는

것보다 이렇게 줄게 됩니다

그리고 다시 얘기를 입력하게 되면 요

걷다가 뜨면 연락받을 수 있지 라고

얘기를 하고 척도가 20 됩니다

여기서 또 주기를 입력하게 되면 요

더 빨리 t 란 얘기지 하고

속도가

아까 20에서 22 루 증가하게

됩니다 또 뛰기를 약하게 되며 또

속도가 증가하게 되구요

또 여기서 뛰다가

제 자리에 서기를 입력하게 되며

뛰다가 갑자기 서면 무릎 연골 나가요

라고 얘기를 하고 제자리에 서게

됩니다

다시 뛰게 하구요

이 튄 상태에서 앉기를 하게 되면

뛰다가 앉으라고 하고

불평을 하고요 제 자리에 서게 됩니다

즉 아까 안자고 했는데 앉지 못하고

선 상태가 됩니다

또 걷기 를 입력하게 되면 요

즉 없게 되구요 이거는 상태에서

앉기를 약하게 되면

걷다가 앉으면 넘어질 수 있어요 라고

얘기하고

상태는 앉아 있게 됩니다

모든 상태에 대한 모든 동작을 다

살펴보지 않았지만

동일한 동작이 라도 상태에 따라서

모두 다르게 처리되는 것을 볼 수

있습니다

만약 이 프로그램을 이 품은 것 같은

조건문 만으로 구한다면 상태가 되기

고 동작이 대개 이므로 총 16 개의

연속된 이 부문 을 사용해야 할

것입니다 하지만 상태를 객체로

표현하는 스테이트 패턴을 적용하면

상태가 내게 이므로

4개의 상태 클래스 를 작성해서 이

프로그램을 만들 수 있습니다

이 그림은 앞서 살펴 본 프로그램에

대한 클래스 다이어그램 입니다

스테이트 패턴이 적용되어 있구요

여기 플레이어에 대한 클래스가 있구요

이 플레이어는 4 가진 이 상태를

가질 수 있습니다

첫번째 상태는 스탠드업 스테이트 로

3 자리에서 인 상태이고

10 다운 스테이트 는 제자리에 앉아

있는 상태입니다

그리고 워크 스테이트 는 걷는

상태이구요

이런 스테이 피는 달리는 상태입니다

이 4개의 상태는 스테이트 라는 추상

클래스를 상속받아서 상태로 써 공통된

타입으로 다룰 수 있도록 합니다

추상 클래스 이므로 클래스 이름을

이탤릭체로 표기하고 있습니다

그리고 이 플레이어 클래스 는

이스테이트 클래스의 객체를 필드로

가짐으로써 원하는 상태를 가질 수

있습니다

이 클래스 다이어그램을 구해보도록

하겠습니다 먼저 플레이어 클래스를

추가합니다

플레이어의 이동 속도에 대한 필드를

추가합니다

2 속도 필드를 설정하고 얻을 수

있는 메서드를 추가합니다

그리고 상태에 대한 필드를 추가합니다

처음 상태는 제자리에 서있는 스탠드업

스테이트 개최합니다

이 스텐 더 스테이트 클래스 는

이후에 추가하겠습니다 이스테이트

클래스도 이후에 추가 하겠습니다

그리고 이 상태 필드를 설정하고 얻을

수 있는 메서드를 추가합니다

그리고 플레이어가 어떤 말을 나는

메서드를 추가합니다

스테이트 클래스를 추가합니다

이 클래스는 추상 클래스입니다

상태를 가질 대상이 되는 플레이어

객체를 필드로 추가합니다

프로텍티브 섞은 자로 주장해서 이

클래스의 파생 클래스에서 이 필드를

접근할 수 있도록 합니다

그리고 생성자에서 이 필드를 지정할

수 있도록 합니다

현재 상태에서 실행 할 수 있는 동작

메서드를 수상 메서드로 추가합니다

[음악]

스탠드 업 은 제자리에 서 있으라는

메서드 이구요

10 다운은

제 자리에 앉으라는 메서드입니다

워크는 걸으라 는 메서드 이구요

너는 뛰라는 매스 빕니다

이 맥이 동작 메서드 는

2 플레이어 개체에 대한 동작입니다

그리고

개 디스크립터 는 현재 상태를 문자의

엘로 표현해서 반환하는 메서드입니다

이제 스테이트 추상 클래스를 상속

받는 구체적인 상태의 클래스를

추가하겠습니다

먼저 스탠드업 스테이트 클래스입니다

스테이트 클래스를 상속 받도록 하구요

생성자를 추가합니다

으

그리고 구현 해야 할 추상 메서드를

추가합니다

스탠 더 메서드 이 코드는 다음과

같습니다

이 클래스 의 상태는 제자리에 서

있는 상태인데요

제 자리서 인 상태에서 스탠 더

메서드를 호출하면 계속 제자리에 서

인 상태가 유지되어야 합니다 그래서

언제 움직일 거야 라는 메세지만

출력하는 것을 하겠습니다

다음은 시 따운 메서드입니다

플레이어의 상태를 10다운 스테이트

로 변경합니다

그리고 서있는 상태에서 않는 상태로

변경 한 것이므로

다음처럼

앉으니 깐 편하고 좋습니다 라는

메시지를 출력합니다

다음은 워크 메서드입니다

서 있는 상태에서

걷는 상태로 변경 하면 되는데요

걷는 것이므로 속도를 5 로

변경했습니다

그리고 플레이어의 상태를 워크

스테이트 객체로 변경입니다

그리고 걷기는 제 2의 생각하기

달하는 메시지를 주력합니다

다음은 런 괴사 드립니다 서있다가

뛰는 것이므로 속도를 걷기보다 빠른

10 으로 변경합니다

그리고 플레이에 상태를

런 스테이트 객체로 변경합니다

그리고 서있다가 띄는 것이므로 갑자기

뛴다 라고 말합니다

그리고 개 d 스크립 션 메소드를

입력하겠습니다

입 sd 의 반환 값은 현재 상태를

문자열로 반환 해야하는데요

다음처럼 입력합니다

나머지 3개의 구체적인 상태 클래스

는 이와 비슷한 방식으로 구현

되는데요 앉아 있는 상태인 10다운

스테이트 클래스를 추가합니다

스테이트 클래스를 상속 없구요

생성자를 추가합니다

그리고 구현 해야 할 추상 메서드를

추가합니다

스탠 더 매서 게 코드를 입력해

보면요

현재 상태는 앉아 있는 상태이고

스탠 더 메서드는 일어나라는 메서드

이므로 플레이에 상태를 스탠드업

스테이트 객체로 변경합니다

[음악]

그리고 플레이어가 잉 낮아 라는 말을

하도록 합니다

다음은 10대 운입니다

현재 상태가 앉아 있는 상태이고 5

그런데 다시 앉으라는 10다운

메서드를 호출하게 되면 상태는 변하지

않습니다

그래서 상태 변경은 없고 진하게 따라

는 말만 합니다

거는 동작인 워크 메소드입니다

현재 상태가 앉아있는데 앉은 상태에서

걸을 수 없다고 하겠습니다 대신

제자리에서 서 개 하겠습니다

다음은 런 메서드입니다

앉아있는 상태에서 바로 뛰는

어려우므로 일단 제자리에서 서도록

하겠습니다

캐디 스크랩 이전 메서드는 현재

상태에 대한 문자열을 방 합니다

다음은 워크 스테이트 클래스입니다

스테이트 클래스를 상속 받도록 하구요

생성자를 추가합니다

그리고 구현 해야 할 추상 메서드를

추가합니다

스탠 더 메서드를 구현하겠습니다

걷는 상태에서 스탠드업 요술 되면

제자리 멈춘 것이므로 속도를 0으로

겠습니다

그리고 멈춰 라고 말하더라구요

상태를 제자리 서있는 스탠드업

스테이트 객체로 지정합니다

10 다운 메서드입니다

앉으면 제작 이에 가만히 게 되므로

속도는 0으로 하구요

걷다가 앉으면 넘어질 수 있어요 라고

말하도록 합니다

그리고 상태를 앉은 상태인 시 따운

스테이트 객체로 변경입니다

[음악]

워크 메서드 인데요

현재 상태가 걷는 상태이므로 상태의

변경은 없습니다 단지 난 걷는걸

좋아하지 라는 말만 하도록 합니다

다음은 런 메서드입니다

걷다가 달님 으로 속도를

20가지 높입니다

그리고 걷다가 뛰면 열라 빨리 쓸 수

있지 라고 말을 합니다

그리고 상태를 달린 상태인 이런

스테이트 객체로 병가 합니다

디스크 레이 션 메서드는 이 클래스가

나타낸 상태인 걷는 줌 이라는

문자열을 바랍니다

다음은 런 스테이트 입니다

스테이트 클래스를 상속 봤구요

생성자를 추가합니다

[음악]

그리고 구현 해야 할 추상 메서드를

추가합니다

펜 점에서 들을 구해 보면요

현재 뜬 상태에서 제자리 멈추는

것인데요

다음처럼 플레이어가 말을 낫더라구요

제자리에서 는 것이므로 속도가 0이

됩니다 그래서 플레이어의 속도를

0으로 변경합니다

[음악]

그리고 플레이어의 상태를

스탠드업 스테이트 객체로 지정합니다

다음은 시 타운 메서드입니다

뛰고 있는데 앉으라고 아닌 불만

가득한 메시지를 출력하고 요

그리고 속도를 0으로 시작합니다

않는 것 대신에 제자리에서 도로

스탠드업 스테이트 객체로 상태를

변경합니다

다음은 워크 배서 드립니다

런 메서드입니다

이미 현재 상태가 찌고 있는

상태인데요 또 런 레서 대로 출 하면

더 빨리 t 라는 것으로 플레이하는

해석합니다 그래서

마음처럼 플레이어가 이야기 가득합니다

그리고 현재 속도에서 이만큼 증가시켜

점점 빠르게 합니다

캐디 스크립 션 메서드는 현재 상태를

분자 열로 바랍니다

이상으로 만든 클래스를 사용해 보도록

하겠습니다 메인 엔트리 클래스를

추가하고 요

5

메인 함수를 추가합니다

먼저 플레이어 객체를 만들구요

[음악]

명령을 키보드에서 인육 팔 수 있도록

스캐너 객체를 하나 만듭니다

3

무한 반복문을

입력하고 요 아 아

현재 플레이어의 상태와 속도를

추적합니다

그리고 병영을 추적합니다

[음악]

1부터 5까지 번호에 대해서 명령할

담겨 있는데요 이 오는

2 무한 반복문을 종료시키는

명령입니다

그리고 키보드로 문자를 입었습니다

입력 문자열로 플레이어의 상태 객체를

통해서

명령에 해당하는 메서드를 호출합니다

마지막으로 프로그램이 종료될 때

스캐너 객체를 씁니다

시작해보겠습니다

실행해 보면 앞서 본 동일한 결과를

볼 수 있습니다

이상으로 상태를 객체를 만들어서

처리하는 페이트 패턴에 대해서

살펴보았습니다

